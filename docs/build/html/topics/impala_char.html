<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2017"><meta name="DC.rights.owner" content="(C) Copyright 2017"><meta name="DC.Type" content="concept"><meta name="DC.Relation" scheme="URI" content="../topics/impala_datatypes.html"><meta name="prodname" content="Impala"><meta name="prodname" content="Impala"><meta name="version" content="Impala 2.8.x"><meta name="version" content="Impala 2.8.x"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="char"><link rel="stylesheet" type="text/css" href="../commonltr.css"><title>CHAR Data Type (Impala 2.0 or higher only)</title></head><body id="char"><main role="main"><article role="article" aria-labelledby="ariaid-title1">

  <h1 class="title topictitle1" id="ariaid-title1">CHAR Data Type (<span class="keyword">Impala 2.0</span> or higher only)</h1>
  
  

  <div class="body conbody">

    <p class="p">
      
      A fixed-length character type, padded with trailing spaces if necessary to achieve the specified length. If
      values are longer than the specified length, Impala truncates any trailing characters.
    </p>

    <p class="p">
        <strong class="ph b">Syntax:</strong>
      </p>

    <p class="p">
      In the column definition of a <code class="ph codeph">CREATE TABLE</code> statement:
    </p>

<pre class="pre codeblock"><code><var class="keyword varname">column_name</var> CHAR(<var class="keyword varname">length</var>)</code></pre>

    <p class="p">
      The maximum length you can specify is 255.
    </p>

    <p class="p">
      <strong class="ph b">Semantics of trailing spaces:</strong>
    </p>

    <ul class="ul">
      <li class="li">
        When you store a <code class="ph codeph">CHAR</code> value shorter than the specified length in a table, queries return
        the value padded with trailing spaces if necessary; the resulting value has the same length as specified in
        the column definition.
      </li>

      <li class="li">
        If you store a <code class="ph codeph">CHAR</code> value containing trailing spaces in a table, those trailing spaces are
        not stored in the data file. When the value is retrieved by a query, the result could have a different
        number of trailing spaces. That is, the value includes however many spaces are needed to pad it to the
        specified length of the column.
      </li>

      <li class="li">
        If you compare two <code class="ph codeph">CHAR</code> values that differ only in the number of trailing spaces, those
        values are considered identical.
      </li>
    </ul>

    <p class="p">
        <strong class="ph b">Partitioning:</strong> This type can be used for partition key columns. Because of the efficiency advantage
        of numeric values over character-based values, if the partition key is a string representation of a number,
        prefer to use an integer type with sufficient range (<code class="ph codeph">INT</code>, <code class="ph codeph">BIGINT</code>, and so
        on) where practical.
      </p>

    <p class="p">
        <strong class="ph b">HBase considerations:</strong> This data type cannot be used with HBase tables.
      </p>

    <p class="p">
        <strong class="ph b">Parquet considerations:</strong>
      </p>

    <ul class="ul">
      <li class="li">
        This type can be read from and written to Parquet files.
      </li>

      <li class="li">
        There is no requirement for a particular level of Parquet.
      </li>

      <li class="li">
        Parquet files generated by Impala and containing this type can be freely interchanged with other components
        such as Hive and MapReduce.
      </li>

      <li class="li">
        Any trailing spaces, whether implicitly or explicitly specified, are not written to the Parquet data files.
      </li>

      <li class="li">
        Parquet data files might contain values that are longer than allowed by the
        <code class="ph codeph">CHAR(<var class="keyword varname">n</var>)</code> length limit. Impala ignores any extra trailing characters when
        it processes those values during a query.
      </li>
    </ul>

    <p class="p">
        <strong class="ph b">Text table considerations:</strong>
      </p>

    <p class="p">
      Text data files might contain values that are longer than allowed for a particular
      <code class="ph codeph">CHAR(<var class="keyword varname">n</var>)</code> column. Any extra trailing characters are ignored when Impala
      processes those values during a query. Text data files can also contain values that are shorter than the
      defined length limit, and Impala pads them with trailing spaces up to the specified length. Any text data
      files produced by Impala <code class="ph codeph">INSERT</code> statements do not include any trailing blanks for
      <code class="ph codeph">CHAR</code> columns.
    </p>

    <p class="p"><strong class="ph b">Avro considerations:</strong></p>
    <p class="p">
        The Avro specification allows string values up to 2**64 bytes in length.
        Impala queries for Avro tables use 32-bit integers to hold string lengths.
        In <span class="keyword">Impala 2.5</span> and higher, Impala truncates <code class="ph codeph">CHAR</code>
        and <code class="ph codeph">VARCHAR</code> values in Avro tables to (2**31)-1 bytes.
        If a query encounters a <code class="ph codeph">STRING</code> value longer than (2**31)-1
        bytes in an Avro table, the query fails. In earlier releases,
        encountering such long values in an Avro table could cause a crash.
      </p>

    <p class="p">
        <strong class="ph b">Compatibility:</strong>
      </p>

    <p class="p">
      This type is available using <span class="keyword">Impala 2.0</span> or higher.
    </p>

    <p class="p">
      Some other database systems make the length specification optional. For Impala, the length is required.
    </p>



    <p class="p">
        <strong class="ph b">Internal details:</strong> Represented in memory as a byte array with the same size as the length
        specification. Values that are shorter than the specified length are padded on the right with trailing
        spaces.
      </p>

    <p class="p">
        <strong class="ph b">Added in:</strong> <span class="keyword">Impala 2.0.0</span>
      </p>

    <p class="p">
        <strong class="ph b">Column statistics considerations:</strong> Because this type has a fixed size, the maximum and average size
        fields are always filled in for column statistics, even before you run the <code class="ph codeph">COMPUTE STATS</code>
        statement.
      </p>



    <p class="p">
        <strong class="ph b">UDF considerations:</strong> This type cannot be used for the argument or return type of a user-defined
        function (UDF) or user-defined aggregate function (UDA).
      </p>

    <p class="p">
        <strong class="ph b">Examples:</strong>
      </p>

    <p class="p">
      These examples show how trailing spaces are not considered significant when comparing or processing
      <code class="ph codeph">CHAR</code> values. <code class="ph codeph">CAST()</code> truncates any longer string to fit within the defined
      length. If a <code class="ph codeph">CHAR</code> value is shorter than the specified length, it is padded on the right with
      spaces until it matches the specified length. Therefore, <code class="ph codeph">LENGTH()</code> represents the length
      including any trailing spaces, and <code class="ph codeph">CONCAT()</code> also treats the column value as if it has
      trailing spaces.
    </p>

<pre class="pre codeblock"><code>select cast('x' as char(4)) = cast('x   ' as char(4)) as "unpadded equal to padded";
+--------------------------+
| unpadded equal to padded |
+--------------------------+
| true                     |
+--------------------------+

create table char_length(c char(3));
insert into char_length values (cast('1' as char(3))), (cast('12' as char(3))), (cast('123' as char(3))), (cast('123456' as char(3)));
select concat("[",c,"]") as c, length(c) from char_length;
+-------+-----------+
| c     | length(c) |
+-------+-----------+
| [1  ] | 3         |
| [12 ] | 3         |
| [123] | 3         |
| [123] | 3         |
+-------+-----------+
</code></pre>

    <p class="p">
      This example shows a case where data values are known to have a specific length, where <code class="ph codeph">CHAR</code>
      is a logical data type to use.

    </p>

<pre class="pre codeblock"><code>create table addresses
  (id bigint,
   street_name string,
   state_abbreviation char(2),
   country_abbreviation char(2));
</code></pre>

    <p class="p">
      The following example shows how values written by Impala do not physically include the trailing spaces. It
      creates a table using text format, with <code class="ph codeph">CHAR</code> values much shorter than the declared length,
      and then prints the resulting data file to show that the delimited values are not separated by spaces. The
      same behavior applies to binary-format Parquet data files.
    </p>

<pre class="pre codeblock"><code>create table char_in_text (a char(20), b char(30), c char(40))
  row format delimited fields terminated by ',';

insert into char_in_text values (cast('foo' as char(20)), cast('bar' as char(30)), cast('baz' as char(40))), (cast('hello' as char(20)), cast('goodbye' as char(30)), cast('aloha' as char(40)));

-- Running this Linux command inside impala-shell using the ! shortcut.
!hdfs dfs -cat 'hdfs://127.0.0.1:8020/user/hive/warehouse/impala_doc_testing.db/char_in_text/*.*';
foo,bar,baz
hello,goodbye,aloha
</code></pre>

    <p class="p">
      The following example further illustrates the treatment of spaces. It replaces the contents of the previous
      table with some values including leading spaces, trailing spaces, or both. Any leading spaces are preserved
      within the data file, but trailing spaces are discarded. Then when the values are retrieved by a query, the
      leading spaces are retrieved verbatim while any necessary trailing spaces are supplied by Impala.
    </p>

<pre class="pre codeblock"><code>insert overwrite char_in_text values (cast('trailing   ' as char(20)), cast('   leading and trailing   ' as char(30)), cast('   leading' as char(40)));
!hdfs dfs -cat 'hdfs://127.0.0.1:8020/user/hive/warehouse/impala_doc_testing.db/char_in_text/*.*';
trailing,   leading and trailing,   leading

select concat('[',a,']') as a, concat('[',b,']') as b, concat('[',c,']') as c from char_in_text;
+------------------------+----------------------------------+--------------------------------------------+
| a                      | b                                | c                                          |
+------------------------+----------------------------------+--------------------------------------------+
| [trailing            ] | [   leading and trailing       ] | [   leading                              ] |
+------------------------+----------------------------------+--------------------------------------------+
</code></pre>

    <p class="p">
        <strong class="ph b">Kudu considerations:</strong>
      </p>
    <p class="p">
        Currently, the data types <code class="ph codeph">DECIMAL</code>, <code class="ph codeph">CHAR</code>, <code class="ph codeph">VARCHAR</code>,
        <code class="ph codeph">ARRAY</code>, <code class="ph codeph">MAP</code>, and <code class="ph codeph">STRUCT</code> cannot be used with Kudu tables.
      </p>

    <p class="p">
        <strong class="ph b">Restrictions:</strong>
      </p>

    <p class="p">
      Because the blank-padding behavior requires allocating the maximum length for each value in memory, for
      scalability reasons avoid declaring <code class="ph codeph">CHAR</code> columns that are much longer than typical values in
      that column.
    </p>

    <p class="p">
        All data in <code class="ph codeph">CHAR</code> and <code class="ph codeph">VARCHAR</code> columns must be in a character encoding that
        is compatible with UTF-8. If you have binary data from another database system (that is, a BLOB type), use
        a <code class="ph codeph">STRING</code> column to hold it.
      </p>

    <p class="p">
      When an expression compares a <code class="ph codeph">CHAR</code> with a <code class="ph codeph">STRING</code> or
      <code class="ph codeph">VARCHAR</code>, the <code class="ph codeph">CHAR</code> value is implicitly converted to <code class="ph codeph">STRING</code>
      first, with trailing spaces preserved.
    </p>

<pre class="pre codeblock"><code>select cast("foo  " as char(5)) = 'foo' as "char equal to string";
+----------------------+
| char equal to string |
+----------------------+
| false                |
+----------------------+
</code></pre>

    <p class="p">
      This behavior differs from other popular database systems. To get the expected result of
      <code class="ph codeph">TRUE</code>, cast the expressions on both sides to <code class="ph codeph">CHAR</code> values of the appropriate
      length:
    </p>

<pre class="pre codeblock"><code>select cast("foo  " as char(5)) = cast('foo' as char(3)) as "char equal to string";
+----------------------+
| char equal to string |
+----------------------+
| true                 |
+----------------------+
</code></pre>

    <p class="p">
      This behavior is subject to change in future releases.
    </p>

    <p class="p">
        <strong class="ph b">Related information:</strong>
      </p>

    <p class="p">
      <a class="xref" href="impala_string.html#string">STRING Data Type</a>, <a class="xref" href="impala_varchar.html#varchar">VARCHAR Data Type (Impala 2.0 or higher only)</a>,
      <a class="xref" href="impala_literals.html#string_literals">String Literals</a>,
      <a class="xref" href="impala_string_functions.html#string_functions">Impala String Functions</a>
    </p>
  </div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/impala_datatypes.html">Data Types</a></div></div></nav></article></main></body></html>