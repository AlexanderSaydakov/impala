<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2018"><meta name="DC.rights.owner" content="(C) Copyright 2018"><meta name="DC.Type" content="concept"><meta name="DC.Relation" scheme="URI" content="../topics/impala_authentication.html"><meta name="prodname" content="Impala"><meta name="prodname" content="Impala"><meta name="version" content="Impala 3.0.x"><meta name="version" content="Impala 3.0.x"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="delegation"><link rel="stylesheet" type="text/css" href="../commonltr.css"><title>Configuring Impala Delegation for Hue and BI Tools</title></head><body id="delegation"><main role="main"><article role="article" aria-labelledby="ariaid-title1">

  <h1 class="title topictitle1" id="ariaid-title1">Configuring Impala Delegation for Hue and BI Tools</h1>



  <div class="body conbody">

    <p class="p">

      When users submit Impala queries through a separate application, such as Hue or a business intelligence tool,
      typically all requests are treated as coming from the same user. In Impala 1.2 and higher, authentication is
      extended by a new feature that allows applications to pass along credentials for the users that connect to
      them (known as <span class="q">"delegation"</span>), and issue Impala queries with the privileges for those users. Currently,
      the delegation feature is available only for Impala queries submitted through application interfaces such as
      Hue and BI tools; for example, Impala cannot issue queries using the privileges of the HDFS user.
    </p>

    <p class="p">
      The delegation feature is enabled by a startup option for <span class="keyword cmdname">impalad</span>:
      <code class="ph codeph">--authorized_proxy_user_config</code>. When you specify this option, users whose names you specify
      (such as <code class="ph codeph">hue</code>) can delegate the execution of a query to another user. The query runs with the
      privileges of the delegated user, not the original user such as <code class="ph codeph">hue</code>. The name of the
      delegated user is passed using the HiveServer2 configuration property <code class="ph codeph">impala.doas.user</code>.
    </p>

    <p class="p">
      You can specify a list of users that the application user can delegate to, or <code class="ph codeph">*</code> to allow a
      superuser to delegate to any other user. For example:
    </p>

<pre class="pre codeblock"><code>impalad --authorized_proxy_user_config 'hue=user1,user2;admin=*' ...</code></pre>

    <div class="note note note_note"><span class="note__title notetitle">Note:</span>
      Make sure to use single quotes or escape characters to ensure that any <code class="ph codeph">*</code> characters do not
      undergo wildcard expansion when specified in command-line arguments.
    </div>

    <p class="p">
      See <a class="xref" href="impala_config_options.html#config_options">Modifying Impala Startup Options</a> for details about adding or changing
      <span class="keyword cmdname">impalad</span> startup options. See
      <a class="xref" href="http://blog.cloudera.com/blog/2013/07/how-hiveserver2-brings-security-and-concurrency-to-apache-hive/" target="_blank">this
      blog post</a> for background information about the delegation capability in HiveServer2.
    </p>
    <p class="p">
      To set up authentication for the delegated users:
    </p>

    <ul class="ul">
      <li class="li">
        <p class="p">
          On the server side, configure either user/password authentication through LDAP, or Kerberos
          authentication, for all the delegated users. See <a class="xref" href="impala_ldap.html#ldap">Enabling LDAP Authentication for Impala</a> or
          <a class="xref" href="impala_kerberos.html#kerberos">Enabling Kerberos Authentication for Impala</a> for details.
        </p>
      </li>

      <li class="li">
        <p class="p">
          On the client side, to learn how to enable delegation, consult the documentation
          for the ODBC driver you are using.
        </p>
      </li>
    </ul>

  </div>

<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/impala_authentication.html">Impala Authentication</a></div></div></nav></article></main></body></html>
